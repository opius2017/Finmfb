## Container Architecture

The FinMFB Banking System uses a modern containerized architecture with Docker and Kubernetes.

```
┌─────────────────────────────────────────────────────────────────────────┐
│                          Web Browsers / Mobile Apps                     │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                              Ingress Controller                         │
└───────────────────────────────────┬─────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                               API Gateway                               │
│                                                                         │
│   ┌─────────────────┐    ┌────────────────┐    ┌────────────────────┐   │
│   │  Authentication │    │  Rate Limiting │    │  Request Routing   │   │
│   └─────────────────┘    └────────────────┘    └────────────────────┘   │
└───────────┬─────────────────────┬───────────────────────┬───────────────┘
            │                     │                       │
            ▼                     ▼                       ▼
┌───────────────────┐  ┌─────────────────────┐  ┌────────────────────────┐
│  Frontend Service │  │   Backend API       │  │  Other Microservices   │
│  (React)          │  │   (.NET 9.0)        │  │  (Future Expansion)    │
└────────┬──────────┘  └──────────┬──────────┘  └────────────┬───────────┘
         │                        │                          │
         │                        ▼                          │
         │             ┌─────────────────────┐               │
         │             │    Service Layer    │               │
         │             │                     │               │
         │             │ ┌───────────────┐   │               │
         │             │ │Integration Svc│   │               │
         │             │ └───────────────┘   │               │
         │             │ ┌───────────────┐   │               │
         │             │ │Domain Services│   │               │
         │             │ └───────────────┘   │               │
         │             └──────────┬──────────┘               │
         │                        │                          │
         │                        ▼                          │
         │             ┌─────────────────────┐               │
         │             │    Domain Layer     │               │
         │             │                     │               │
         │             │ ┌───────────────┐   │               │
         │             │ │Entities       │   │               │
         │             │ └───────────────┘   │               │
         │             │ ┌───────────────┐   │               │
         │             │ │Domain Events  │   │               │
         │             │ └───────────────┘   │               │
         │             └──────────┬──────────┘               │
         │                        │                          │
         ▼                        ▼                          ▼
┌───────────────────────────────────────────────────────────────────────┐
│                       Shared Infrastructure                           │
│                                                                       │
│  ┌─────────────┐  ┌─────────────┐  ┌───────────────┐  ┌────────────┐  │
│  │ SQL Server  │  │    Redis    │  │   RabbitMQ    │  │   Storage  │  │
│  │  Database   │  │    Cache    │  │ Message Broker│  │   Service  │  │
│  └─────────────┘  └─────────────┘  └───────────────┘  └────────────┘  │
└───────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌───────────────────────────────────────────────────────────────────────┐
│                       Monitoring & Observability                      │
│                                                                       │
│  ┌─────────────┐  ┌─────────────┐  ┌───────────────┐  ┌────────────┐  │
│  │ Prometheus  │  │   Grafana   │  │      Seq      │  │ App Metrics│  │
│  │  Metrics    │  │ Dashboards  │  │    Logging    │  │ Collectors │  │
│  └─────────────┘  └─────────────┘  └───────────────┘  └────────────┘  │
└───────────────────────────────────────────────────────────────────────┘
```

This architecture provides several benefits:

1. **Scalability**: Each component can scale independently based on demand
2. **Resilience**: Failures are isolated to specific containers
3. **Observability**: Comprehensive monitoring with Prometheus, Grafana, and Seq
4. **Security**: Network isolation with Kubernetes network policies
5. **Portability**: Consistent deployment across development, testing, and production environments
6. **Resource Efficiency**: Optimal resource utilization with container orchestration

## Kubernetes Resource Organization

The Kubernetes resources are organized as follows:

```
┌─────────────────────────────────────────────────────────────────────────┐
│                                Namespace                                │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │                         Deployments                             │    │
│  │                                                                 │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────┐ │    │
│  │  │  Frontend   │  │     API     │  │   Gateway   │  │  Others │ │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────┘ │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │                           Services                              │    │
│  │                                                                 │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────┐ │    │
│  │  │  Frontend   │  │     API     │  │   Gateway   │  │  Others │ │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────┘ │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │                       ConfigMaps/Secrets                        │    │
│  │                                                                 │    │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────┐ │    │
│  │  │    Configs  │  │   Secrets   │  │ Credentials │  │  Others │ │    │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────┘ │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │                        Network Policies                         │    │
│  │                                                                 │    │
│  │  ┌─────────────────────────┐  ┌─────────────────────────────┐   │    │
│  │  │  Ingress/Egress Rules   │  │     Pod Isolation Rules     │   │    │
│  │  └─────────────────────────┘  └─────────────────────────────┘   │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │                         HPA/VPA/PDB                             │    │
│  │                                                                 │    │
│  │  ┌─────────────────────────┐  ┌─────────────────────────────┐   │    │
│  │  │    Autoscaling Rules    │  │   Disruption Budgets        │   │    │
│  │  └─────────────────────────┘  └─────────────────────────────┘   │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────┘
```

## Container Security Model

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        Container Security Layers                        │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │                      Infrastructure Security                     │    │
│  │                                                                 │    │
│  │  • Minimal base images                                          │    │
│  │  • Multi-stage builds                                           │    │
│  │  • Non-root containers                                          │    │
│  │  • Read-only file systems                                       │    │
│  │  • Resource limits                                              │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │                        Network Security                         │    │
│  │                                                                 │    │
│  │  • Network policies                                             │    │
│  │  • Service mesh encryption                                      │    │
│  │  • Ingress TLS termination                                      │    │
│  │  • Pod-to-pod encryption                                        │    │
│  │  • Egress filtering                                             │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │                    Application Security                         │    │
│  │                                                                 │    │
│  │  • Authentication                                               │    │
│  │  • Authorization                                                │    │
│  │  • Rate limiting                                                │    │
│  │  • Input validation                                             │    │
│  │  • Output encoding                                              │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │                      Data Security                              │    │
│  │                                                                 │    │
│  │  • Secrets management                                           │    │
│  │  • Encryption at rest                                           │    │
│  │  • Encryption in transit                                        │    │
│  │  • Data backups                                                 │    │
│  │  • Data retention policies                                      │    │
│  └─────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────┘
```